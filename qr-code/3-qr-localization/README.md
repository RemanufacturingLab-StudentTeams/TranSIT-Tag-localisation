# QR Code Localisation

Real-time QR code detection with 6DoF pose estimation and result visualization.

## Scripts

### Pose Estimation
**`qr-pose-estimation.py`** - Real-time QR code tracking

Features:
- Detects and decodes QR codes via OpenCV
- Uses `cv.solvePnP()` for 6DoF pose estimation
- Displays 3D coordinate axes overlaid on QR code
- Shows real-time position (X, Y, Z) in centimeters
- Shows rotation (roll, pitch, yaw) in degrees
- Computes 5-second position averages
- Exports session data to Excel

### Visualization
**`visualization.py`** - 3D localisation analysis

Features:
- Interactive Excel file selection
- Reads camera and QR code positions from `Setup_Info` sheet
- Reads estimated positions from `All_Data` sheet
- Converts relative to global coordinates
- Computes per-axis Euclidean errors
- 3D visualization with three views:
  - Isometric view (20, 30)
  - Top-down view (90, -90)
  - Side view (0, 0)

## Prerequisites

Copy `camera-matrix.txt` from `2-camera-calibration/` to this folder before running pose estimation.

## Usage

### Real-time Tracking
```bash
python qr-pose-estimation.py
```

Controls:
- **Q** - Quit and save data
- Data auto-saved on exit

### Result Analysis
```bash
python visualization.py
```

Select the Excel file generated by the pose estimation script.

## Input Format (for visualization)

Excel file with two sheets:

**Sheet: `Setup_Info`**
| Item | X | Y | Z |
|------|---|---|---|
| Camera | 12.5 | 35.2 | 0 |
| QR Code | 57.8 | 62.0 | 0 |

**Sheet: `All_Data`**
| X_Position_cm | Y_Position_cm | Z_Position_cm |
|---------------|---------------|---------------|
| ... | ... | ... |

## Output

### Pose Estimation
- Real-time video with overlaid axes and position data
- Excel file with timestamped measurements
- Per-QR-code data sheets

### Visualization
- 3-panel matplotlib figure showing spatial relationships
- Error lines from estimated to actual positions
- Mean absolute error per axis in titles

## Use Cases

- Evaluate localisation accuracy
- Debug coordinate transformation logic
- Compare camera configurations
- Demonstrate tracking performance
